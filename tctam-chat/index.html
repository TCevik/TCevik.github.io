<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://tcevik.github.io/style.css">
    <script src="https://tcevik.github.io/script.js"></script>
    <title>TC_tam Chat App</title>
</head>
<body>
    <button id="top-left-button" onclick="window.location.href='/'">Home</button>
    <div id="user-info" style="display: none;">
        <span id="user-email"></span>
        <button id="logout-btn">Logout</button>
        <button id="change-password-btn">Change Password</button>
    </div>
      
    <div id="login">
        <h1>Login / Register</h1>
        <form id="login-form">
            <input type="email" id="login-email" placeholder="Email" required>
            <input type="password" id="login-password" placeholder="Password" required>
            <button type="submit">Login / Register</button>
            <button id="reset-password-btn">Reset Password</button>
        </form>
    </div>

    <div id="chat" style="display: none;">
        <input type="text" id="message-input" placeholder="Enter a message" maxlength="500" autocomplete="off">
        <button id="send-button">Send</button>
        <div id="chat-output"></div>
    </div>


    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-database-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="firebase-auth.js"></script>
    <script src="chat.js"></script>

    <style>
        .popupChat {
          position: fixed;
          z-index: 10000;
          background: var(--background-color);
          padding: 10px;
          border: 1px solid var(--h1234-color);
          border-radius: 10px;
          font-size: var(--font-size);
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
        }

        .popupChat button {
            padding-top: 3px;
            padding-bottom: 2px;
        }
    </style>

    <script>
      /* accept popupChat */
      document.addEventListener('DOMContentLoaded', function () {
        if (!localStorage.getItem('acceptPopupChat')) {
          var popupChat = document.createElement('div');
          popupChat.id = 'popupChat';
          popupChat.className = 'popupChat';
        
          var text = 'Chat Disclaimer: This chat is an open chat where users are free to communicate. There are no rules about what can be said or shared. This means that adult content may also be present. Users under the age of 18 are advised to use this chat only under adult supervision.';
          popupChat.innerHTML = text;
        
          var button = document.createElement('button');
          button.innerHTML = 'Ok';
        
          button.addEventListener('click', function () {
            var opacity = 1;
            var intervalId = setInterval(function () {
              opacity -= 0.05;
              popupChat.style.opacity = opacity;
              if (opacity <= 0) {
                clearInterval(intervalId);
                popupChat.style.display = 'none';
              }
            }, 15);
          
            localStorage.setItem('acceptPopupChat', 'true');
          });
        
          popupChat.appendChild(document.createElement('br')); // Added new line
          popupChat.appendChild(button);
        
          document.body.appendChild(popupChat);
        }
      });
    </script>
</body>
</html>