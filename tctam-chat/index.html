<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://tcevik.github.io/style.css">
    <script src="https://tcevik.github.io/script.js"></script>
    <title>TC_tam Chat App</title>
</head>
<body style="width: 100%;">
    <div id="user-info">
        <span id="user-email"></span>
        <button id="logout-btn">Uitloggen</button>
        <button id="change-password-btn">Wachtwoord wijzigen</button>
    </div>
      
    <div id="login">
        <h1>Inloggen / Registreren</h1>
        <form id="login-form">
            <input type="email" id="login-email" placeholder="E-mailadres" required>
            <br><input type="password" id="login-password" placeholder="Wachtwoord" required>
            <br><button type="submit">Inloggen / Registreren</button>
            <br>
            <br><a style="margin-right: 20px; cursor: pointer;" id="reset-password-btn" onclick="changePassword();">Wachtwoord Vergeten</a>
            <a style="cursor: pointer;" id="reset-password-btn" onclick="alert('Sorry, dit kan niet opgelost worden! Probeer je email te herrinneren of maak een nieuw account.');">Email Vergeten</a>
        </form>
    </div>

    <div id="chat" style="display: none;">
        <div id="chat-output" style="position: relative;"></div>
        
        <div id="ui-input">
            <input style="width: 50%;" type="text" id="message-input" placeholder="Voer een bericht in" maxlength="500" autocomplete="off">
            <button style="width: 20%;" id="send-button">Verzenden</button>
        </div>
    </div>


    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-database-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="firebase-auth.js"></script>
    <script src="chat.js"></script>

    <style>
        #login-email {
          border-bottom-right-radius: 0px;
          border-bottom-left-radius: 0px;
          border-top-right-radius: 20px;
          border-top-left-radius: 20px;
          border-width: 2px;
          margin-bottom: 0px;
          width: 300px;
        }

        #login-password {
          border-top-right-radius: 0px;
          border-top-left-radius: 0px;
          border-bottom-right-radius: 20px;
          border-bottom-left-radius: 20px;
          border-width: 2px;
          margin-top: 0px;
          margin-bottom: 5px;
          width: 300px;
        }

        .popupChat {
          position: fixed;
          z-index: 10000;
          background: var(--background-color);
          padding: 10px;
          border: 1px solid var(--h1234-color);
          border-radius: 10px;
          font-size: var(--font-size);
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
        }

        .popupChat button {
            padding-top: 3px;
            padding-bottom: 2px;
        }

        #user-info {
            position: fixed;
            width: 100vw;
            display: none;
            z-index: 9999;
        }

        #chat-output {
            max-height: 85vh;
            overflow: auto;
        }

        #ui-input {
            position: fixed;
            width: 100vw;
            max-height: 15vh;
            border-top: 3px solid var(--h1234-color);
            border-top-right-radius: 50px;
            border-top-left-radius: 50px;
            bottom: 0px;
            background-color: var(--background-color);
            z-index: 9999;
        }
    </style>

    <script>
      /* accepteer popupChat */
      document.addEventListener('DOMContentLoaded', function () {
        if (!localStorage.getItem('acceptPopupChat')) {
          var popupChat = document.createElement('div');
          popupChat.id = 'popupChat';
          popupChat.className = 'popupChat';
        
          var text = 'Disclaimer chat: Deze chat is een open chat waar gebruikers vrij zijn om te communiceren. Er zijn geen regels voor wat er gezegd of gedeeld mag worden. Dit betekent dat er ook 18+ content kan voorkomen. Gebruikers onder de 18 jaar wordt geadviseerd deze chat alleen onder toezicht van een volwassene te gebruiken.';
          popupChat.innerHTML = text;
        
          var button = document.createElement('button');
          button.innerHTML = 'Ok';
        
          button.addEventListener('click', function () {
            var opacity = 1;
            var intervalId = setInterval(function () {
              opacity -= 0.05;
              popupChat.style.opacity = opacity;
              if (opacity <= 0) {
                clearInterval(intervalId);
                popupChat.style.display = 'none';
              }
            }, 15);
          
            localStorage.setItem('acceptPopupChat', 'true');
          });
        
          popupChat.appendChild(document.createElement('br')); // Nieuwe regel toegevoegd
          popupChat.appendChild(button);
        
          document.body.appendChild(popupChat);
        }
      });
    </script>
</body>
</html>
