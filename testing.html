<!DOCTYPE html>
<html lang="nl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Embed</title>
    <link rel="stylesheet" href="/style.css">
    <script src="/script.js"></script>
</head>

<body>

    <h1>YouTube Embed</h1>

    <form>
        <label for="videoLink">Voer hier de YouTube-link in:</label>
        <input type="text" id="videoLink" placeholder="Plak de link hier" required>
        <button type="button" onclick="embedVideo()">Inbedden</button>
        <button type="button" onclick="openPiP()">Open PiP</button>
    </form>

    <div id="embeddedVideo"></div>

    <script>
        function embedVideo() {
            var videoLink = document.getElementById("videoLink").value;
            var embeddedVideo = document.getElementById("embeddedVideo");

            // Haal de video-id uit de YouTube-link
            var videoId = getVideoId(videoLink);

            // Controleer of de link een geldige YouTube-link is
            if (videoId) {
                // Bouw het ingebedde videoformaat op
                var embedCode = `https://www.youtube.com/embed/${videoId}?si=wzQ6juVpwkJjor2N`;

                // Voeg een knop toe voor picture-in-picture
                var pipButton = document.createElement("button");
                pipButton.textContent = "PIP weergeven";
                pipButton.addEventListener("click", function () {
                    // Controleer of de browser PIP ondersteunt
                    if ('pictureInPictureEnabled' in document) {
                        embeddedVideo.querySelector('iframe').requestPictureInPicture();
                    } else {
                        alert("Deze browser ondersteunt geen Picture-in-Picture.");
                    }
                });

                // Plaats de ingebedde video en de PIP-knop op de pagina
                embeddedVideo.innerHTML = `<iframe width="560" height="315" src="${embedCode}" frameborder="0" allowfullscreen></iframe>`;
                embeddedVideo.appendChild(pipButton);
            } else {
                alert("Ongeldige YouTube-link. Voer een geldige YouTube-link in.");
            }
        }

        function getVideoId(url) {
            var match = url.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);
            return match ? match[1] : null;
        }
    </script>

</body>

</html>