<!DOCTYPE html>
<html lang="nl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Embed</title>
    <link rel="stylesheet" href="/style.css">
    <script src="/script.js"></script>
</head>

<body>

    <h1>YouTube Embed</h1>

    <form>
        <label for="videoLink">Voer hier de YouTube-link in:</label>
        <input type="text" id="videoLink" placeholder="Plak de link hier" required>
        <button type="button" onclick="embedVideo()">Inbedden</button>
    </form>

    <div id="embeddedVideo"></div>

    <script>
        function embedVideo() {
            var videoLink = document.getElementById("videoLink").value;
            var embeddedVideo = document.getElementById("embeddedVideo");

            var videoId = getVideoId(videoLink);

            if (videoId) {
                var embedCode = `https://www.youtube.com/embed/${videoId}?si=wzQ6juVpwkJjor2N`;

                embeddedVideo.innerHTML = `<iframe width="560" height="315" src="${embedCode}" frameborder="0" allowfullscreen></iframe>`;
            } else {
                alert("Ongeldige YouTube-link. Voer een geldige YouTube-link in.");
            }
        }

        function getVideoId(url) {
            var match = url.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);
            return match ? match[1] : null;
        }

        document.addEventListener("visibilitychange", function () {
            var embeddedVideo = document.getElementById("embeddedVideo");
            var videoIframe = embeddedVideo.querySelector("iframe");

            if (document.hidden) {
                // Als de pagina niet zichtbaar is, stop de video niet
                videoIframe.src += "&autoplay=1";
            } else {
                // Als de pagina zichtbaar is, speel de video af
                videoIframe.src = videoIframe.src.replace("&autoplay=1", "");
            }
        });
    </script>

</body>

</html>